webpackJsonp([0xf55d2b514be2],{624:function(e,t){e.exports={data:{markdownRemark:{html:'<p>I wanted to try and use <a href="https://www.docker.com/">Docker</a> after hearing such great things about it. Since I might want to roll out a decent forum at some point, I wanted to look into installing <a href="http://www.discourse.org/">Discourse</a>. For the moment, this will be done on my desktop.</p>\n<p>I start with the <a href="http://docs.docker.com/installation/ubuntulinux/">installation instructions</a> for Docker on Ubuntu 14.04.</p>\n<ul>\n<li>For Discourse it\'s needed to follow the instructions for the newest version of Docker and not to use the default Ubuntu package.</li>\n</ul>\n<p>I proceed with <a href="http://www.howtoinstalldiscourse.com/how-to-install-discourse-on-ubuntu/">this tutorial</a> that specifies to run:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">wget -qO- https://get.docker.io/ | sh\nmkdir /var/docker\ngit clone https://github.com/discourse/discourse_docker.git /var/docker\ncd /var/docker\ncp samples/standalone.yml containers/app.yml</code></pre>\n      </div>\n<p>I modify /var/docker/containers/app.yml (all relevant changes to app.yml are at the bottom)</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">DISCOURSE_HOSTNAME: &#39;localhost&#39;</code></pre>\n      </div>\n<p>but on running start <code class="language-text">sudo ./launcher start app</code> I get:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">2014/11/16 10:46:31 Error response from daemon: Cannot start container 270d47cd8401c50f13e0a1e51428f5b9833a9480b53bc98735df55b425a70b6d: Error starting userland proxy: listen tcp 0.0.0.0:80: bind: address already in use</code></pre>\n      </div>\n<p>This could be expected, because Apache runs on port 80.</p>\n<p>in /var/docker/containers/app.yml there is an entry:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">expose:\n  - &quot;80:80&quot;   # fwd host port 80   to container port 80 (http)\n  - &quot;2222:22&quot; # fwd host port 2222 to container port 22 (ssh)</code></pre>\n      </div>\n<p>After using <code class="language-text">netstat -antp</code> to confirm port 8080 is unused, I change 80:80 to 8080:80 in the app.yml.</p>\n<p>Now I rebuild and restart the container:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">cd /var/docker\nsudo ./launcher rebuild app # this applies the changes\nsudo ./launcher start app</code></pre>\n      </div>\n<p>When I use the browser to go to <a href="http://localhost:8080/">http://localhost:8080/</a>, it immediately gives me Discourse page!</p>\n<p>Now I notice, when creating the admin account, that the activation mail is not send. Thinking back I did skip over the mail settings in the app.yml.</p>\n<p>Here I had to experiment a bit with my mail settings and this turned out in the end what took most of the time for getting Discourse up and running. One thing I learned is that it\'s not neccesary to stop the app with <code class="language-text">sudo ./launcher stop app</code> before making changes or rebuilding.</p>\n<p>Soon I find that running <code class="language-text">sudo ./launcher mailtest app</code> gives much more useful information, thanks to <a href="https://meta.discourse.org/t/discourse-new-install-registration-emails-not-sent-because-from-address-cant-be-changed/16663/11">this thread</a>.</p>\n<p>I configure the app.yml to use the Google smtp server (settings are below), but <code class="language-text">sudo ./launcher mailtest app</code> still gives an error:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">ERROR: python yaml module not installed - run the following and try again:\n\nsudo apt-get install python3-yaml</code></pre>\n      </div>\n<p>After installing this package mailtest tells me there is an authentication problem and apparently I need to allow "less secure apps" access to my gmail account. After setting this up at Google accounts, I can send mail with mailtest. </p>\n<p>The activate mail link is now send and I can access the admin panel in Discourse.</p>\n<p>I have also tried to set up mail with the SMTP settings of my own ISP, but this gave an error that I could not find any solutions to:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">Traceback (most recent call last):\n  File &quot;/var/docker/scripts/mailtest&quot;, line 138, in &lt;module&gt;\n    smtp = smtplib.SMTP(smtp_addr, smtp_port, timeout=5)\n  File &quot;/usr/lib/python3.4/smtplib.py&quot;, line 242, in __init__\n    (code, msg) = self.connect(host, port)\n  File &quot;/usr/lib/python3.4/smtplib.py&quot;, line 321, in connect\n    self.sock = self._get_socket(host, port, self.timeout)\n  File &quot;/usr/lib/python3.4/smtplib.py&quot;, line 292, in _get_socket\n    self.source_address)\n  File &quot;/usr/lib/python3.4/socket.py&quot;, line 509, in create_connection\n    raise err\n  File &quot;/usr/lib/python3.4/socket.py&quot;, line 500, in create_connection\n    sock.connect(sa)\nOSError: [Errno 113] No route to host</code></pre>\n      </div>\n<p>Since I never use my ISP\'s mail server, it might simply be that I use the wrong SMTP address or something.</p>\n<p>In the end, I use these setting in my app.yml (these are just the edited fragments):</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">expose:\n  - &quot;8080:80&quot;  # fwd host port 80   to container port 80 (http)\n  - &quot;2222:22&quot;  # fwd host port 2222 to container port 22 (ssh)\n\n  DISCOURSE_DEVELOPER_EMAILS: &#39;myemail@example.com&#39;\n\n  DISCOURSE_HOSTNAME: &#39;localhost&#39;\n\n  DISCOURSE_SMTP_ADDRESS: smtp.gmail.com\n  DISCOURSE_SMTP_PORT: 587\n  DISCOURSE_SMTP_USER_NAME: mygmail@gmail.com\n  DISCOURSE_SMTP_PASSWORD: ******</code></pre>\n      </div>\n<p>I wonder now, since I\'m starting discourse now with <code class="language-text">./launcher start app</code> if I should have renamed the containers/app.yml to discourse.yml to be able to start Discourse with <code class="language-text">./launcher start discourse</code>? I don\'t know how difficult (or easy?) it will be to change this afterwards, but I will leave it for another time to figure this out.</p>',htmlAst:{type:"root",children:[{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I wanted to try and use "},{type:"element",tagName:"a",properties:{href:"https://www.docker.com/"},children:[{type:"text",value:"Docker"}]},{type:"text",value:" after hearing such great things about it. Since I might want to roll out a decent forum at some point, I wanted to look into installing "},{type:"element",tagName:"a",properties:{href:"http://www.discourse.org/"},children:[{type:"text",value:"Discourse"}]},{type:"text",value:". For the moment, this will be done on my desktop."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I start with the "},{type:"element",tagName:"a",properties:{href:"http://docs.docker.com/installation/ubuntulinux/"},children:[{type:"text",value:"installation instructions"}]},{type:"text",value:" for Docker on Ubuntu 14.04."}]},{type:"text",value:"\n"},{type:"element",tagName:"ul",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"For Discourse it's needed to follow the instructions for the newest version of Docker and not to use the default Ubuntu package."}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I proceed with "},{type:"element",tagName:"a",properties:{href:"http://www.howtoinstalldiscourse.com/how-to-install-discourse-on-ubuntu/"},children:[{type:"text",value:"this tutorial"}]},{type:"text",value:" that specifies to run:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"wget -qO- https://get.docker.io/ | sh\nmkdir /var/docker\ngit clone https://github.com/discourse/discourse_docker.git /var/docker\ncd /var/docker\ncp samples/standalone.yml containers/app.yml"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I modify /var/docker/containers/app.yml (all relevant changes to app.yml are at the bottom)"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"DISCOURSE_HOSTNAME: 'localhost'"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"but on running start "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"sudo ./launcher start app"}]},{type:"text",value:" I get:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"2014/11/16 10:46:31 Error response from daemon: Cannot start container 270d47cd8401c50f13e0a1e51428f5b9833a9480b53bc98735df55b425a70b6d: Error starting userland proxy: listen tcp 0.0.0.0:80: bind: address already in use"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"This could be expected, because Apache runs on port 80."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"in /var/docker/containers/app.yml there is an entry:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:'expose:\n  - "80:80"   # fwd host port 80   to container port 80 (http)\n  - "2222:22" # fwd host port 2222 to container port 22 (ssh)'}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"After using "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"netstat -antp"}]},{type:"text",value:" to confirm port 8080 is unused, I change 80:80 to 8080:80 in the app.yml."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Now I rebuild and restart the container:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"cd /var/docker\nsudo ./launcher rebuild app # this applies the changes\nsudo ./launcher start app"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"When I use the browser to go to "},{type:"element",tagName:"a",properties:{href:"http://localhost:8080/"},children:[{type:"text",value:"http://localhost:8080/"}]},{type:"text",value:", it immediately gives me Discourse page!"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Now I notice, when creating the admin account, that the activation mail is not send. Thinking back I did skip over the mail settings in the app.yml."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Here I had to experiment a bit with my mail settings and this turned out in the end what took most of the time for getting Discourse up and running. One thing I learned is that it's not neccesary to stop the app with "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"sudo ./launcher stop app"}]},{type:"text",value:" before making changes or rebuilding."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Soon I find that running "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"sudo ./launcher mailtest app"}]},{type:"text",value:" gives much more useful information, thanks to "},{type:"element",tagName:"a",properties:{href:"https://meta.discourse.org/t/discourse-new-install-registration-emails-not-sent-because-from-address-cant-be-changed/16663/11"},children:[{type:"text",value:"this thread"}]},{type:"text",value:"."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I configure the app.yml to use the Google smtp server (settings are below), but "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"sudo ./launcher mailtest app"}]},{type:"text",value:" still gives an error:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"ERROR: python yaml module not installed - run the following and try again:\n\nsudo apt-get install python3-yaml"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:'After installing this package mailtest tells me there is an authentication problem and apparently I need to allow "less secure apps" access to my gmail account. After setting this up at Google accounts, I can send mail with mailtest. '}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The activate mail link is now send and I can access the admin panel in Discourse."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I have also tried to set up mail with the SMTP settings of my own ISP, but this gave an error that I could not find any solutions to:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:'Traceback (most recent call last):\n  File "/var/docker/scripts/mailtest", line 138, in <module>\n    smtp = smtplib.SMTP(smtp_addr, smtp_port, timeout=5)\n  File "/usr/lib/python3.4/smtplib.py", line 242, in __init__\n    (code, msg) = self.connect(host, port)\n  File "/usr/lib/python3.4/smtplib.py", line 321, in connect\n    self.sock = self._get_socket(host, port, self.timeout)\n  File "/usr/lib/python3.4/smtplib.py", line 292, in _get_socket\n    self.source_address)\n  File "/usr/lib/python3.4/socket.py", line 509, in create_connection\n    raise err\n  File "/usr/lib/python3.4/socket.py", line 500, in create_connection\n    sock.connect(sa)\nOSError: [Errno 113] No route to host'}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Since I never use my ISP's mail server, it might simply be that I use the wrong SMTP address or something."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"In the end, I use these setting in my app.yml (these are just the edited fragments):"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"expose:\n  - \"8080:80\"  # fwd host port 80   to container port 80 (http)\n  - \"2222:22\"  # fwd host port 2222 to container port 22 (ssh)\n\n  DISCOURSE_DEVELOPER_EMAILS: 'myemail@example.com'\n\n  DISCOURSE_HOSTNAME: 'localhost'\n\n  DISCOURSE_SMTP_ADDRESS: smtp.gmail.com\n  DISCOURSE_SMTP_PORT: 587\n  DISCOURSE_SMTP_USER_NAME: mygmail@gmail.com\n  DISCOURSE_SMTP_PASSWORD: ******"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I wonder now, since I'm starting discourse now with "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"./launcher start app"}]},{type:"text",value:" if I should have renamed the containers/app.yml to discourse.yml to be able to start Discourse with "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"./launcher start discourse"}]},{type:"text",value:"? I don't know how difficult (or easy?) it will be to change this afterwards, but I will leave it for another time to figure this out."}]}],data:{quirksMode:!1}},timeToRead:4,excerpt:"I wanted to try and use  Docker  after hearing such great things about it. Since I might want to roll out a decent forum at some point, Iâ€¦",frontmatter:{title:"Discourse on Ubuntu 14.04",cover:"/cover/",hash:"81a3c44053e16e5b3395d5e2ea977fa4d1f31d58",date:"16-11-2014",category:"mypc",tags:["mypc"]},fields:{nextTitle:"Utopic Dop",nextSlug:"/utopic-dop",prevTitle:"Gaining Root Access to Smart Home Gateway",prevSlug:"/gaining-root-access-to-smart-home-gateway",slug:"/discourse-on-ubuntu-14-04"}}},pathContext:{slug:"/discourse-on-ubuntu-14-04"}}}});
//# sourceMappingURL=path---discourse-on-ubuntu-14-04-230d70e15abe24fc608a.js.map