webpackJsonp([45983417089057],{640:function(e,t){e.exports={data:{markdownRemark:{html:'<p><strong>EDIT</strong> The issue concerning the compilation of npm for ARM seems to have been fixed, which would outdate this post. The latest builds should be available at <a href="https://nodejs.org/dist/">https://nodejs.org/dist/</a>. For RPi 1 look for the builds with "armv6l", for RPi2B "armv7l", and for RPi3 I assume you would need "arm64".</p>\n<hr>\n<p>Although it\'s relatively easy to install <a href="http://nodejs.org">Node.js</a> on a Raspberry Pi, getting npm to work is a bit more challenging. </p>\n<p>It seems there is <a href="http://redandwhite.herokuapp.com/#/post/5516eba439156a0e00cad4f6">an issue with compiling npm</a>, at least for ARM. As long as this remains unfixed, there is no npm with the node 0.12.x ARM installation.</p>\n<p>A very simple workaround is to copy the node_modules from another system and to run the packages (e.g. <a href="https://github.com/trentm/node-bunyan">bunyan</a>, which is supposed to be installed globally) with node. Since installing (globally or not) is not possible, but node is installed, I will call it directly from the node_modules that I copied from another machine.</p>\n<p>So instead of using <code class="language-text">npm start</code> configured in package.json as <code class="language-text">node app.js | bunyan</code> I would do <code class="language-text">node app.js | node node_modules/bunyan/bin/bunyan</code></p>\n<p>Or if I would like to read the log file afterwards:</p>\n<p><code class="language-text">node node_modules/bunyan/bin/bunyan -o short error.log</code></p>\n<p>This would also work for other systems where npm can\'t be installed or if npm can\'t be used to install packages. I\'ve used this on a system behind a corporate proxy, although I\'ve found <a href="../npm-without-internet">a better way</a> by now.</p>\n<h1 id="node-on-rpi"><a href="#node-on-rpi" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Node on RPi</h1>\n<p>Keep in mind that this still requires Node.js to be installed. For a Raspberry Pi running Raspbmc it\'s possible to use <em>apt-get</em> to install Node, but it won\'t be a recent version. Instead, I use the ARM build <em>node_latest_armhf.deb</em> from <a href="http://node-arm.herokuapp.com">node-arm</a>.</p>\n<h1 id="compiling-node-on-rpi"><a href="#compiling-node-on-rpi" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compiling Node on RPi</h1>\n<p>I\'ve also tried compiling Node from source on the Raspberry Pi (model B). It should not be very difficult, but it failed in my case, probably because of the issue with npm, mentioned before. To be complete, I will list my steps.</p>\n<ul>\n<li>I had already installed gcc earlier with <code class="language-text">sudo apt-get install build-essential</code></li>\n<li>I looked up the latest version in <a href="http://nodejs.org/dist/">http://nodejs.org/dist/</a></li>\n<li>At 11-7-2015 this was <a href="http://nodejs.org/dist/v0.12.7/node-v0.12.7.tar.gz">http://nodejs.org/dist/v0.12.7/node-v0.12.7.tar.gz</a></li>\n</ul>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text"># adapted from http://elinux.org/Node.js_on_RPi\nwget http://nodejs.org/dist/v0.12.7/node-v0.12.7.tar.gz\ntar -xzf node-v0.12.7.tar.gz # duration ca. 1 min\ncd node-v0.12.7\n./configure # duration ca. 1 min</code></pre>\n      </div>\n<p>Here I would really recommend to start a screen session, because compiling takes ca. 2 hours.</p>\n<ul>\n<li><code class="language-text">sudo apt-get install screen</code></li>\n<li><code class="language-text">screen</code> start a session</li>\n<li><code class="language-text">ctrl + a, d</code> detach session</li>\n<li><code class="language-text">screen -dRR</code> reattach to any session running</li>\n</ul>\n<p>My first attempt to run make ended with this error:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">/usr/include/linux/sysinfo.h:8:2: error: unknown type name &#39;__kernel_long_t&#39;`</code></pre>\n      </div>\n<p>From <a href="http://raspberrypi.stackexchange.com/questions/8566/peerguardian-moblock-installation-on-raspbmc">this thread</a> I found the solution to add these lines:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">#ifndef __kernel_long_t\ntypedef long     __kernel_long_t;\ntypedef unsigned long   __kernel_ulong_t;\n#endif</code></pre>\n      </div>\n<p>to the file /usr/include/linux/sysinfo.h, before the lines:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">    #define SI_LOAD_SHIFT   16struct sysinfo {...</code></pre>\n      </div>\n<p>The second attempt to run make failed with this error:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">/bin/sh: 1: cannot create /home/pi/node-v0.12.7/out/Release/.deps//home/pi/node-v0.12.7/out/Release/obj.target/libuv/deps/uv/src/unix/linux-core.o.d: Permission denied</code></pre>\n      </div>\n<p>So in the end I ran clean and make as root:</p>\n<ul>\n<li><code class="language-text">sudo make clean</code></li>\n<li><code class="language-text">sudo make</code></li>\n</ul>\n<p>after some hours it fails with:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">/out/Release/obj.target/v8_snapshot/geni/snapshot.cc&quot;\nIllegal instruction\nmake[1]: *** [/home/pi/node-v0.12.7/out/Release/obj.target/v8_snapshot/geni/snapshot.cc] Error 132\nmake[1]: Leaving directory `/home/pi/node-v0.12.7/out&#39;\nmake: *** [node] Error 2</code></pre>\n      </div>\n<p>This is either the compile issue as described in the beginning of this article, or yet again another issue. Since I found out about the compile issue at this point I\'ve stopped experimenting and resorted to the quick workaround.</p>',htmlAst:{type:"root",children:[{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"EDIT"}]},{type:"text",value:" The issue concerning the compilation of npm for ARM seems to have been fixed, which would outdate this post. The latest builds should be available at "},{type:"element",tagName:"a",properties:{href:"https://nodejs.org/dist/"},children:[{type:"text",value:"https://nodejs.org/dist/"}]},{type:"text",value:'. For RPi 1 look for the builds with "armv6l", for RPi2B "armv7l", and for RPi3 I assume you would need "arm64".'}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Although it's relatively easy to install "},{type:"element",tagName:"a",properties:{href:"http://nodejs.org"},children:[{type:"text",value:"Node.js"}]},{type:"text",value:" on a Raspberry Pi, getting npm to work is a bit more challenging. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"It seems there is "},{type:"element",tagName:"a",properties:{href:"http://redandwhite.herokuapp.com/#/post/5516eba439156a0e00cad4f6"},children:[{type:"text",value:"an issue with compiling npm"}]},{type:"text",value:", at least for ARM. As long as this remains unfixed, there is no npm with the node 0.12.x ARM installation."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"A very simple workaround is to copy the node_modules from another system and to run the packages (e.g. "},{type:"element",tagName:"a",properties:{href:"https://github.com/trentm/node-bunyan"},children:[{type:"text",value:"bunyan"}]},{type:"text",value:", which is supposed to be installed globally) with node. Since installing (globally or not) is not possible, but node is installed, I will call it directly from the node_modules that I copied from another machine."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"So instead of using "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"npm start"}]},{type:"text",value:" configured in package.json as "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"node app.js | bunyan"}]},{type:"text",value:" I would do "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"node app.js | node node_modules/bunyan/bin/bunyan"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Or if I would like to read the log file afterwards:"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"node node_modules/bunyan/bin/bunyan -o short error.log"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"This would also work for other systems where npm can't be installed or if npm can't be used to install packages. I've used this on a system behind a corporate proxy, although I've found "},{type:"element",tagName:"a",properties:{href:"../npm-without-internet"},children:[{type:"text",value:"a better way"}]},{type:"text",value:" by now."}]},{type:"text",value:"\n"},{type:"element",tagName:"h1",properties:{id:"node-on-rpi"},children:[{type:"element",tagName:"a",properties:{href:"#node-on-rpi",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Node on RPi"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Keep in mind that this still requires Node.js to be installed. For a Raspberry Pi running Raspbmc it's possible to use "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"apt-get"}]},{type:"text",value:" to install Node, but it won't be a recent version. Instead, I use the ARM build "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"node_latest_armhf.deb"}]},{type:"text",value:" from "},{type:"element",tagName:"a",properties:{href:"http://node-arm.herokuapp.com"},children:[{type:"text",value:"node-arm"}]},{type:"text",value:"."}]},{type:"text",value:"\n"},{type:"element",tagName:"h1",properties:{id:"compiling-node-on-rpi"},children:[{type:"element",tagName:"a",properties:{href:"#compiling-node-on-rpi",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Compiling Node on RPi"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I've also tried compiling Node from source on the Raspberry Pi (model B). It should not be very difficult, but it failed in my case, probably because of the issue with npm, mentioned before. To be complete, I will list my steps."}]},{type:"text",value:"\n"},{type:"element",tagName:"ul",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"I had already installed gcc earlier with "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"sudo apt-get install build-essential"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"I looked up the latest version in "},{type:"element",tagName:"a",properties:{href:"http://nodejs.org/dist/"},children:[{type:"text",value:"http://nodejs.org/dist/"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"At 11-7-2015 this was "},{type:"element",tagName:"a",properties:{href:"http://nodejs.org/dist/v0.12.7/node-v0.12.7.tar.gz"},children:[{type:"text",value:"http://nodejs.org/dist/v0.12.7/node-v0.12.7.tar.gz"}]}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"# adapted from http://elinux.org/Node.js_on_RPi\nwget http://nodejs.org/dist/v0.12.7/node-v0.12.7.tar.gz\ntar -xzf node-v0.12.7.tar.gz # duration ca. 1 min\ncd node-v0.12.7\n./configure # duration ca. 1 min"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Here I would really recommend to start a screen session, because compiling takes ca. 2 hours."}]},{type:"text",value:"\n"},{type:"element",tagName:"ul",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"sudo apt-get install screen"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"screen"}]},{type:"text",value:" start a session"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"ctrl + a, d"}]},{type:"text",value:" detach session"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"screen -dRR"}]},{type:"text",value:" reattach to any session running"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"My first attempt to run make ended with this error:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"/usr/include/linux/sysinfo.h:8:2: error: unknown type name '__kernel_long_t'`"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"From "},{type:"element",tagName:"a",properties:{href:"http://raspberrypi.stackexchange.com/questions/8566/peerguardian-moblock-installation-on-raspbmc"},children:[{type:"text",value:"this thread"}]},{type:"text",value:" I found the solution to add these lines:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"#ifndef __kernel_long_t\ntypedef long     __kernel_long_t;\ntypedef unsigned long   __kernel_ulong_t;\n#endif"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"to the file /usr/include/linux/sysinfo.h, before the lines:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"    #define SI_LOAD_SHIFT   16struct sysinfo {..."}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The second attempt to run make failed with this error:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"/bin/sh: 1: cannot create /home/pi/node-v0.12.7/out/Release/.deps//home/pi/node-v0.12.7/out/Release/obj.target/libuv/deps/uv/src/unix/linux-core.o.d: Permission denied"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"So in the end I ran clean and make as root:"}]},{type:"text",value:"\n"},{type:"element",tagName:"ul",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"sudo make clean"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"sudo make"}]}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"after some hours it fails with:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"]},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"/out/Release/obj.target/v8_snapshot/geni/snapshot.cc\"\nIllegal instruction\nmake[1]: *** [/home/pi/node-v0.12.7/out/Release/obj.target/v8_snapshot/geni/snapshot.cc] Error 132\nmake[1]: Leaving directory `/home/pi/node-v0.12.7/out'\nmake: *** [node] Error 2"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"This is either the compile issue as described in the beginning of this article, or yet again another issue. Since I found out about the compile issue at this point I've stopped experimenting and resorted to the quick workaround."}]}],data:{quirksMode:!1}},timeToRead:4,excerpt:"EDIT  The issue concerning the compilation of npm for ARM seems to have been fixed, which would outdate this post. The latest builds shouldâ€¦",frontmatter:{title:"npm workaround",cover:"/cover/",hash:"8ba3352fd8de2e23fbeefb834dbcc343b718f6b0",date:"12-07-2015",category:"webdevelopment",tags:["webdevelopment"]},fields:{nextTitle:"Functional Javascript Update",nextSlug:"/functional-javascript-update",prevTitle:"npm without internet",prevSlug:"/npm-without-internet",slug:"/npm-workaround"}}},pathContext:{slug:"/npm-workaround"}}}});
//# sourceMappingURL=path---npm-workaround-68542e2df9d45845bb19.js.map